<!DOCTYPE html>
<html lang="en">
  <head>
    <title>GitHub Downloads</title>
    <style>
    body {
      right: 50%;
      bottom: 50%;
      transform: translate(50%,50%);
      position: absolute;
    }
    * {
      font-family: Helvetica;
    }
    </style>
    <script>
      function doTheThing() {
        var xhttp1 = new XMLHttpRequest();
        var xhttp2 = new XMLHttpRequest();
        var xhttp3 = new XMLHttpRequest();
        
        xhttp1.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {
              xhttp2.open('GET', './downloads/'+JSON.parse(this.responseText).id+'.json');
              xhttp2.send();
            } else {
              alert("Couldn't get that repository.");
            }
          }
        }
        
        xhttp2.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {
              alert('dataset json');
            } else {
              xhttp3.open('GET', 'https://api.github.com/repos/'+document.getElementById("username").value+'/'+document.getElementById("repository").value+'/downloads', true);
              xhttp3.send();
            }
          }
        }
        
        xhttp3.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {
              alert(JSON.parse(this.responseText));
            } else {
              alert("Couldn't get any downloads");
            }
          }
        }
        
        xhttp1.open('GET', 'https://api.github.com/repos/'+document.getElementById("username").value+'/'+document.getElementById("repository").value, true);
        xhttp1.send();
      }
    </script>
  </head>
  <body>
    <p><b font-size="150%">GitHub Downloads Checker</b></p>
    <form action="javascript:doTheThing()">
      https://github.com/
      <input type="text" id="username" name="username">
      /
      <input type="text" id="repository" name="repository">
      <br>
      <br>
      <input type="submit" value="Submit">
    </form> 
  </body>
</html>
